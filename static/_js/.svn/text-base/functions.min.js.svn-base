var isCtrl=false;$(document).keyup(function(a){if(a.which==17){isCtrl=false}}).keydown(function(b){if(b.which==17){isCtrl=true}switch(b.which){case 83:if(isCtrl){if($(".ui-dialog .salvar").button("option","disabled").length!=0&&!$(".ui-dialog .salvar").button("option","disabled")){try{salvarPopUp()}catch(a){}}else{if(!$(".ui-layout-center .salvar").button("option","disabled")){try{salvar()}catch(a){}}}return false}break;case 78:if(isCtrl){if($(".ui-dialog .novo").button("option","disabled").length!=0&&!$(".ui-dialog .novo").button("option","disabled")){try{novoPopUp()}catch(a){}}else{if(!$(".ui-layout-center .novo").button("option","disabled")){try{novo()}catch(a){}}}return false}break;case 69:if(isCtrl){if($(".ui-dialog .excluir").button("option","disabled").length!=0&&!$(".ui-dialog .excluir").button("option","disabled")){try{excluirPopUp()}catch(a){}}else{if(!$(".ui-layout-center .excluir").button("option","disabled")){try{excluir()}catch(a){}}}return false}break;case 13:if(isCtrl){if($(".ui-dialog .pesquisar").button("option","disabled").length!=0&&!$(".ui-dialog .pesquisar").button("option","disabled")){try{pesquisarPopUp()}catch(a){}}else{if(!$(".ui-layout-center .pesquisar").button("option","disabled")){try{pesquisar()}catch(a){}}}return false}break;case 73:if(isCtrl){if($(".ui-dialog .imprimir").button("option","disabled").length!=0&&!$(".ui-dialog .imprimir").button("option","disabled")){try{imprimirPopUp()}catch(a){}}else{if(!$(".ui-layout-center .imprimir").button("option","disabled")){try{imprimir()}catch(a){}}}return false}break;default:break}});$(document).ready(function(){$.ajaxSetup({global:true,dataType:"json",beforeSend:function(){$("#carregando").fadeIn("normal",function(){$("input:button").blur()})},complete:function(){$("#carregando").fadeOut("normal")}});$(".breadCrumb").jBreadCrumb();$("form").submit(function(){return false});$("input:button, input:submit").button({text:true});$("button").button();$(".datepicker").datepicker({dateFormat:"dd/mm/yy",showButtonPanel:true,changeMonth:true,changeYear:true,yearRange:"-100:+10",showOtherMonths:true,selectOtherMonths:true,showOn:"button",buttonImage:IMG+"/calendar.gif",buttonImageOnly:true});$("#menu").treeview({persist:"cookie",cookieId:"navigationtree",cookieOptions:{path:PATH_COOKIE}});$("#permissao_aplicativos").treeview();$("#btnConfiguracoes").button({text:true,icons:{primary:"ui-icon-person"}});$("#btnSair").button({text:true,icons:{primary:"ui-icon-power"}});$("#btnCloseOpenMenu").button({text:true,icons:{primary:"ui-icon-pin-s"}}).click(function(){$("button").blur();btnCloseOpenMenu()});if($("#btnCloseOpenMenu").button("option","label")=="Exibir menu"){$("#btnCloseOpenMenu").button("option",{text:true,label:"Exibir menu",icons:{primary:"ui-icon-pin-w"}})}$(".button-hit").button({text:false,icons:{primary:"ui-icon-search"}});$(".ui-layout-center .voltar-pagina").button({text:false,icons:{primary:"ui-icon-circle-arrow-w"}}).live("click",function(){$("button").blur();history.go(-1)});$(".ui-layout-center .pesquisar").button({text:true,icons:{primary:"ui-icon-search"}}).click(function(){$("button").blur();try{pesquisar()}catch(b){messageErrorBox("Erro ao executar o método pesquisar() "+b)}});$(".ui-layout-center .salvar").button({text:true,icons:{primary:"ui-icon-disk"}}).click(function(c){$("button").blur();try{salvar()}catch(b){messageErrorBox("Erro ao executar o método salvar() "+b)}});$(".ui-layout-center .novo").button({text:true,icons:{primary:"ui-icon-document"}}).click(function(){$("button").blur();try{novo()}catch(b){messageErrorBox("Erro ao executar o método novo() "+b)}});$(".ui-layout-center .abrir").button({text:true,icons:{primary:"ui-icon-folder-open"}}).click(function(){$("button").blur();try{abrir()}catch(b){messageErrorBox("Erro ao executar o método abrir() "+b)}});$(".ui-layout-center .excluir").button({text:true,icons:{primary:"ui-icon-trash"}}).click(function(){$("button").blur();try{excluir()}catch(b){messageErrorBox("Erro ao executar o método excluir() "+b)}});$(".ui-layout-center .imprimir").button({text:true,icons:{primary:"ui-icon-print"}}).click(function(){$("button").blur();try{imprimir()}catch(b){messageErrorBox("Erro ao executar o método imprimir() "+b)}});$(".ui-layout-center .ajuda").button({text:true,icons:{primary:"ui-icon-help"}}).click(function(){$("button").blur();try{ajuda()}catch(b){messageErrorBox("Erro ao executar o método ajuda() "+b)}});$("#txtBuscaMenu").focus(function(){if($("#txtBuscaMenu").val()=="buscar no menu"){$("#txtBuscaMenu").val("")}});$("#txtBuscaMenu").focusout(function(){if($("#txtBuscaMenu").val()==""){$("#txtBuscaMenu").val("buscar no menu");$("#menu > li").removeHighlight()}});$("#txtBuscaMenu").autocomplete({source:function(d,b){$("#menu > li").removeHighlight();if($("#txtBuscaMenu").val()!=""){$("#menu > li").highlight(d.term)}var f=$(".highlight").parent();var e=new Array();for(var c=0;c<f.length;c++){if(f[c].tagName=="A"){e.push(new ClassPrograma($(f[c]).attr("href"),$(f[c]).text()))}}b($.map(e,function(g){return{label:g.nome,value:g.nome,valueHidden:g.url}}))},select:function(b,c){location.href=c.item.valueHidden}});try{$("#content-center .toolbar").fixFloat()}catch(a){}generateTabs();loadMasks();try{init()}catch(a){}});function generateTabs(){var dialogs=$(".ui-dialog-content").get();for(var i=0;i<dialogs.length;i++){var jqgrids=$("#"+dialogs[i].id+" .ui-jqgrid").get();for(var j=0;j<jqgrids.length;j++){var jqgrid=jqgrids[j].id.split("_",2)[1];if($("#"+jqgrid).jqGrid("getGridParam","autowidth")){try{$("#"+jqgrid).jqGrid("setGridWidth",$("#"+dialogs[i].id).outerWidth()-25)}catch(err){}}}}var tabs=$(".tabs").get();for(var i=0;i<tabs.length;i++){if($("#"+tabs[i].id+" ul:first").html()==""){$("#"+tabs[i].id+" ul:first li").remove();$("#"+tabs[i].id+" ."+tabs[i].id+" .label"+tabs[i].id).clone().appendTo("#"+tabs[i].id+" ul:first");$("#"+tabs[i].id+" ."+tabs[i].id+" .label"+tabs[i].id).parent().remove()}var jqgrids=$("#"+tabs[i].id+" .ui-jqgrid").get();for(var j=0;j<jqgrids.length;j++){var jqgrid=jqgrids[j].id.split("_",2)[1];if($("#"+jqgrid).jqGrid("getGridParam","autowidth")){try{$("#"+jqgrid).jqGrid("setGridWidth",$("#"+tabs[i].id).outerWidth()-35)}catch(err){}}}}$(".tabs").tabs({show:function(event,ui){try{tabShow(ui.index,ui.tab.title.split("-",2)[0])}catch(err){}try{eval(ui.tab.title.split("-",2)[0]+"Show("+ui.index+");")}catch(err){}},load:function(event,ui){loadComponents();generateTabs();var tabs=$("#"+ui.tab.title+" > .tabs").get();for(var i=0;i<tabs.length;i++){if($("#"+tabs[i].id+" ul:first").html()==""){$("#"+tabs[i].id+" ul:first li").remove();$("#"+tabs[i].id+" ."+tabs[i].id+" .label"+tabs[i].id).clone().appendTo("#"+tabs[i].id+" ul:first");$("#"+tabs[i].id+" ."+tabs[i].id+" .label"+tabs[i].id).parent().remove()}var jqgrids=$("#"+tabs[i].id+" .ui-jqgrid").get();for(var j=0;j<jqgrids.length;j++){var jqgrid=jqgrids[j].id.split("_",2)[1];if($("#"+jqgrid).jqGrid("getGridParam","autowidth")){try{$("#"+jqgrid).jqGrid("setGridWidth",$("#"+tabs[i].id).outerWidth()-35)}catch(err){}$("#"+tabs[i].id).width($("#"+tabs[i].id).outerWidth())}}}try{tabLoad(ui.index,ui.tab.title.split("-",2)[0])}catch(err){try{eval(ui.tab.title.split("-",2)[0]+"Load("+ui.index+");")}catch(err){}}},select:function(event,ui){},cache:true,ajaxOptions:{dataType:"html",error:function(xhr,status,index,anchor){$(anchor.hash).html("");messageErrorBox("Não foi possível carregar as informações")}}})}function loadComponents(){$(".breadCrumb").jBreadCrumb();$("form").submit(function(){return false});$("input:button, input:submit").button({text:true});$("button").button();$("button.button-hit").each(function(){$(this).button({icons:{primary:"ui-icon-search"},text:false})});$(".datepicker").datepicker({dateFormat:"dd/mm/yy",showButtonPanel:true,changeMonth:true,changeYear:true,yearRange:"-100:+10",showOtherMonths:true,selectOtherMonths:true,showOn:"button",buttonImage:IMG+"/calendar.gif",buttonImageOnly:true});$(".ui-dialog .pesquisar").button({text:true,icons:{primary:"ui-icon-search"}}).click(function(){$("button").blur();try{pesquisarPopUp()}catch(a){messageErrorBox("Erro ao executar o método pesquisarPopUp() "+a)}});$(".ui-dialog .salvar").button({text:true,icons:{primary:"ui-icon-disk"}}).click(function(b){$("button").blur();try{salvarPopUp()}catch(a){messageErrorBox("Erro ao executar o método salvarPopUp() "+a)}});$(".ui-dialog .novo").button({text:true,icons:{primary:"ui-icon-document"}}).click(function(){$("button").blur();try{novoPopUp()}catch(a){messageErrorBox("Erro ao executar o método novoPopUp() "+a)}});$(".ui-dialog .abrir").button({text:true,icons:{primary:"ui-icon-folder-open"}}).click(function(){$("button").blur();try{abrirPopUp()}catch(a){messageErrorBox("Erro ao executar o método abrirPopUp() "+a)}});$(".ui-dialog .excluir").button({text:true,icons:{primary:"ui-icon-trash"}}).click(function(){$("button").blur();try{excluirPopUp()}catch(a){messageErrorBox("Erro ao executar o método excluirPopUp() "+a)}});$(".ui-dialog .imprimir").button({text:true,icons:{primary:"ui-icon-print"}}).click(function(){$("button").blur();try{imprimirPopUp()}catch(a){messageErrorBox("Erro ao executar o método imprimirPopUp() "+a)}});$(".ui-dialog .ajuda").button({text:true,icons:{primary:"ui-icon-help"}}).click(function(){$("button").blur();try{ajudaPopUp()}catch(a){messageErrorBox("Erro ao executar o método ajudaPopUp() "+a)}});loadMasks()}function ClassPrograma(b,a){this.url=b;this.nome=a}function resetForm(a){$("#"+a).resetForm()}function clearFields(a){$("#"+a).clearFields()}function logout(){location.href=BASE_URL+"autenticacao/login/sair"}function beforeSubmit(e,c,a,b){var d=true;return d}function configuracoesUsuario(){location.href=BASE_URL+"dashboard/configuracao"}function btnCloseOpenMenu(){if($(".ui-layout-west").hasClass("closed")){$.cookie("showMenu",true,{path:PATH_COOKIE});$("#btnCloseOpenMenu").button("option",{text:true,label:"Esconder menu",icons:{primary:"ui-icon-pin-s"}});$(".ui-layout-west").removeClass("closed");$(".ui-layout-west").fadeIn("slow",resizeGridTab)}else{$.cookie("showMenu",false,{path:PATH_COOKIE});$("#btnCloseOpenMenu").button("option",{text:true,label:"Exibir menu",icons:{primary:"ui-icon-pin-w"}});$(".ui-layout-west").addClass("closed");$(".ui-layout-west").fadeOut("slow",resizeGridTab)}}function resizeGridTab(){var f=$(".ui-layout-center .ui-jqgrid").get();for(var a=0;a<f.length;a++){var e=f[a].id.split("_",2)[1];if($("#"+e).jqGrid("getGridParam","autowidth")){$("#"+e).jqGrid("setGridWidth",document.getElementById("content-center").offsetWidth-13)}}var d=$(".tabs").get();for(var c=0;c<d.length;c++){var f=$("#"+d[c].id+" .ui-jqgrid").get();for(var b=0;b<f.length;b++){var e=f[b].id.split("_",2)[1];if($("#"+e).jqGrid("getGridParam","autowidth")){$("#"+e).jqGrid("setGridWidth",document.getElementById(d[c].id).offsetWidth-35)}}}}function setValueCombo(b,a){$("#"+b).val(a).selectmenu("value",a)}function openInputTextHit(e,d,c,a,b){if($("#"+a).val()){$.post(e,{cod_object:$("#"+a).val()},function(g){if(g.object.id!=undefined){g.object.error=false;try{console.log(g.object)}catch(f){}if($.isFunction(d)){try{d(g.object)}catch(f){}}}else{clearButtonHit(c,a,b);messageErrorBox("Nenhum registro foi encontrado.",a)}})}else{clearButtonHit(c,a,b,d)}}function clearButtonHit(c,a,b,d){$("#"+c).val("");$("#"+a).val("");$("#"+b).val("");if($.isFunction(d)){try{d({error:true})}catch(e){}}}function openButtonHit(a,c,b){openWindow(a,c,b)}function buttonHitCallBack(b,a){try{console.log(a)}catch(c){}if($.isFunction(b)){try{b(a)}catch(c){}}parent.closeWindowSelf()}function uploadCallBack(a){if($.isFunction(a)){try{a()}catch(b){}}closeWindowSelf()}function validateCPF(b){var a=b.value;exp=/\.|\-/g;a=a.toString().replace(exp,"");if(a!=""){if(!cpfIsTrue(a)){b.value="";messageErrorBox("CPF inválido.",b.id)}}}function cpfIsTrue(b){var a,d,c,e,g,f;f=1;if(b.length<11){return false}for(e=0;e<b.length-1;e++){if(b.charAt(e)!=b.charAt(e+1)){f=0;break}}if(!f){a=b.substring(0,9);d=b.substring(9);c=0;for(e=10;e>1;e--){c+=a.charAt(10-e)*e}g=c%11<2?0:11-c%11;if(g!=d.charAt(0)){return false}a=b.substring(0,10);c=0;for(e=11;e>1;e--){c+=a.charAt(11-e)*e}g=c%11<2?0:11-c%11;if(g!=d.charAt(1)){return false}return true}else{return false}}function validateDate(a){var d=document.getElementById(a);var c=d.value;var b="99/99/9999";if($.trim(c.replace("/","").replace("/",""))!=""){if(c.length!=10){clearDateField(a,b);messageErrorBox("Formato da data não é válido. Formato correto: - dd/mm/aaaa.",a);return false}if("/"!=c.substr(2,1)||"/"!=c.substr(5,1)){clearDateField(a,b);messageErrorBox("Formato da data não é válido. Formato correto: - dd/mm/aaaa.",a);return false}dia=c.substr(0,2);mes=c.substr(3,2);ano=c.substr(6,4);if(isNaN(dia)||dia>31||dia<1){clearDateField(a,b);messageErrorBox("Formato do dia não é válido.",a);return false}if(mes==4||mes==6||mes==9||mes==11){if(dia=="31"){clearDateField(a,b);messageErrorBox("O mês informado não possui 31 dias.",a);return false}}if(mes=="02"){bissexto=ano%4;if(bissexto==0){if(dia>29){clearDateField(a,b);messageErrorBox("O mês informado possui somente 29 dias.",a);return false}}else{if(dia>28){clearDateField(a,b);messageErrorBox("O mês informado possui somente 28 dias.",a);return false}}}if(isNaN(mes)||mes>12||mes<1){clearDateField(a,b);messageErrorBox("Formato do mês não é válido.",a);return false}if(isNaN(ano)){clearDateField(a,b);messageErrorBox("Formato do ano não é válido.",a);return false}}}function clearDateField(a,b){var c=document.getElementById(a);$("#"+a).unmask();c.value="";$(".datepicker").mask(b,{placeholder:" "})}function getIntervalDate(a,b){var a=a.split("/");var b=b.split("/");inicio=new Date(a[2],a[1]-1,a[0]);fim=new Date(b[2],b[1]-1,b[0]);dif=fim.getTime()-inicio.getTime();dia=1000*60*60*24;intervalDate=dif/dia;return intervalDate}String.prototype.val=function(b){var a=$("#"+this);if(b!=undefined){if(a.get(0).tagName=="SELECT"){this.setValueCombo(b)}else{if(a.attr("type")=="checkbox"){if(b||b!=""){a.attr("checked",true)}else{a.removeAttr("checked")}}else{a.val(b)}}}else{if(a.attr("type")=="checkbox"){return(a.attr("checked")==undefined)}}return a.val()};jQuery.fn.disable=function(){return this.each(function(){var a=$(this);if(a.get(0).tagName=="SELECT"){a.attr("disabled",true).selectmenu("disable")}else{a.attr("disabled",true).addClass("ui-state-disabled")}})};jQuery.fn.enable=function(){return this.each(function(){var a=$(this);if(a.get(0).tagName=="SELECT"){a.attr("disabled",false).selectmenu("enable")}else{a.attr("disabled",false).removeClass("ui-state-disabled")}})};String.prototype.disable=function(){var a=$("#"+this);if(a.get(0).tagName=="SELECT"){a.attr("disabled",true).selectmenu("disable")}else{a.attr("disabled",true).addClass("ui-state-disabled")}};String.prototype.enable=function(){$("#"+this).attr("disabled",false).selectmenu("enable")};String.prototype.setValueCombo=function(a){$("#"+this).val(a).selectmenu("value",a)};String.prototype.clearCombo=function(){objectCombo=document.getElementById(this);countRows=objectCombo.length;for(var a=countRows;a>0;a--){objectCombo.remove(a)}$("#"+this).selectmenu("destroy");$("#"+this).selectmenu({style:"dropdown",maxHeight:150,width:parseInt(objectCombo.style.width.replace("px",""))+4})};String.prototype.removeFirst=function(){objectCombo=document.getElementById(this);objectCombo.remove(0);$("#"+this).selectmenu("destroy");$("#"+this).selectmenu({style:"dropdown",maxHeight:150,width:parseInt(objectCombo.style.width.replace("px",""))+4})};String.prototype.loadCombo=function(c,e,a,d){comboName=this;objectCombo=document.getElementById(comboName);countRows=objectCombo.length;for(var b=objectCombo.length;b>0;b--){objectCombo.remove(b)}if(e!=undefined){paramSelectedIndex=e+"";if(paramSelectedIndex.substr(0,1)!="{"){a=e}}$.post(c,e,function(j){for(var g=0;g<j.combo.length;g++){var h=j.combo[g].value;var f=j.combo[g].optionName;if(f!=false){objectCombo.options[objectCombo.options.length]=new Option(f,h,true,true)}}if(a!=undefined){objectCombo.value=a}else{objectCombo.value=""}$("#"+comboName).selectmenu("destroy");$("#"+comboName).selectmenu({style:"dropdown",maxHeight:150,width:parseInt(objectCombo.style.width.replace("px",""))+4});if($.isFunction(d)){d()}},"json")};